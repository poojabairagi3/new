<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Form</title>
    
  </head>
  <body>
    <header>
      <h1>Form</h1>
    </header>

    
      <form onSubmit="saveToLocalStorage(event)">
        <div style="font-size: large;">
            
            <h1>Add User</h1>
        <div>
          <label >Name:</label>
          <input type="text" name="username" id="usernameid">
        </div>
    <div>
          <label >Email:</label>
          <input type="email" name="emailId" id="emailnameid">
        </div>
        <button>Submit</button>
    </div>
      </form>
      
    <ul id="listofitems"></ul>
    <script >
        function saveToLocalStorage(event){
            event.preventDefault();
            var name=event.target.username.value;
            var email=event.target.emailId.value;

            // localStorage.setItem('name',name);
            // localStorage.setItem('email',email);

            var obj={
                name:name,
                email:email
            }
             
            localStorage.setItem(obj.email,JSON.stringify(obj));
        
        showUserOnScreen(obj)    }    
        function showUserOnScreen(obj){
            var parentElement=document.getElementById('listofitems');
            var childElement = document.createElement('li');
            childElement.textContent=obj.name+ ' - ' +obj.email;
            
            var parentElement=document.getElementById('listofitems');
            var deleteButton = document.createElement('input');
            deleteButton.type="button";
            deleteButton.value='Delete';
            deleteButton.onclick=()=> {
                localStorage.removeItem(obj.email);
                parentElement.removeChild(childElement);
            }
            childElement.appendChild(deleteButton);
            parentElement.appendChild(childElement);

            
            var parentElement=document.getElementById('listofitems');
            var editButton = document.createElement('input');
            editButton.type="button";
            editButton.value='Edit';
            editButton.onclick=()=> {
                localStorage.removeItem(obj.email);
                parentElement.removeChild(childElement);
                document.getElementById('usernameid').value=obj.name
                document.getElementById('emailnameid').value=obj.email

            }
            childElement.appendChild(editButton);
            parentElement.appendChild(childElement);
            }

            



    </script>


  </body>
</html>
